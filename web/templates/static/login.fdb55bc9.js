var e=Object.defineProperty,o=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(o,t,s)=>t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s;import{_ as a,c as l,l as i}from"./index.d1286f7e.js";const n={data:()=>({loginForm:{username:"",password:""},loading:!1,capsTooltip:!1,passwordType:"password",title:""}),created(){document.title=this.docTitle,l().then((e=>{201===e.code?this.$router.replace("/register").catch():(this.title=e.data.title,document.title=this.title,this.$store.commit("SET_TITLE",this.title))}))},computed:((e,a)=>{for(var l in a||(a={}))t.call(a,l)&&r(e,l,a[l]);if(o)for(var l of o(a))s.call(a,l)&&r(e,l,a[l]);return e})({},Vuex.mapState(["docTitle"])),mounted(){this.$refs.password.focus()},methods:{registerUser(){this.$router.replace("/registerUser").catch()},showPwd(){"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((()=>{this.$refs.password.focus()}))},checkCapslock(e){const{key:o}=e;this.capsTooltip=o&&1===o.length&&o>="A"&&o<="Z"},async handleLogin(){if(""===this.loginForm.username||""===this.loginForm.password)return void this.$message.error(this.$t("inputNotNull"));const e=Object.assign({},this.loginForm);e.password=CryptoJS.SHA224(this.loginForm.password).toString();const o=(await i(e)).token;let t=!1;"admin"===this.loginForm.username&&(t=!0),this.$store.commit("SET_ADMIN",t),this.$store.commit("LOGIN_IN",o),this.$router.replace("/").catch()}}},p={class:"login-container"},c={class:"title-container"},d={class:"title"},u={class:"svg-container"},m={class:"svg-container"};var V=a(n,[["render",function(e,o,t,s,r,a){const l=Vue.resolveComponent("svg-icon"),i=Vue.resolveComponent("el-input"),n=Vue.resolveComponent("el-form-item"),V=Vue.resolveComponent("el-tooltip"),h=Vue.resolveComponent("el-button"),g=Vue.resolveComponent("el-form");return Vue.openBlock(),Vue.createElementBlock("div",p,[Vue.createVNode(g,{ref:"loginForm",model:r.loginForm,class:"login-form",autocomplete:"on","label-position":"left"},{default:Vue.withCtx((()=>[Vue.createElementVNode("div",c,[Vue.createElementVNode("h3",d,Vue.toDisplayString(r.title),1)]),Vue.createVNode(n,{prop:"username"},{default:Vue.withCtx((()=>[Vue.createElementVNode("span",u,[Vue.createVNode(l,{"icon-class":"user"})]),Vue.createVNode(i,{ref:"username",modelValue:r.loginForm.username,"onUpdate:modelValue":o[0]||(o[0]=e=>r.loginForm.username=e),placeholder:"Username",name:"username",type:"text",tabindex:"1","auto-complete":"on"},null,8,["modelValue"])])),_:1}),Vue.createVNode(V,{visible:r.capsTooltip,"onUpdate:visible":o[4]||(o[4]=e=>r.capsTooltip=e),content:"Caps lock is On",placement:"right",manual:""},{default:Vue.withCtx((()=>[Vue.createVNode(n,{prop:"password"},{default:Vue.withCtx((()=>[Vue.createElementVNode("span",m,[Vue.createVNode(l,{"icon-class":"password"})]),(Vue.openBlock(),Vue.createBlock(i,{key:r.passwordType,ref:"password",modelValue:r.loginForm.password,"onUpdate:modelValue":o[1]||(o[1]=e=>r.loginForm.password=e),type:r.passwordType,placeholder:"Password",name:"password",tabindex:"2","auto-complete":"on",onKeyup:[a.checkCapslock,Vue.withKeys(a.handleLogin,["enter"])],onBlur:o[2]||(o[2]=e=>r.capsTooltip=!1)},null,8,["modelValue","type","onKeyup"])),Vue.createElementVNode("span",{class:"show-pwd",onClick:o[3]||(o[3]=(...e)=>a.showPwd&&a.showPwd(...e))},[Vue.createVNode(l,{"icon-class":"password"===r.passwordType?"eye":"eye-open"},null,8,["icon-class"])])])),_:1})])),_:1},8,["visible"]),Vue.createVNode(h,{loading:r.loading,type:"primary",style:{width:"100%","margin-bottom":"30px","margin-left":"0px"},onClick:Vue.withModifiers(a.handleLogin,["prevent"])},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.$t("login")),1)])),_:1},8,["loading","onClick"]),Vue.createVNode(h,{loading:r.loading,type:"primary",style:{width:"100%","margin-bottom":"30px","margin-left":"0px"},onClick:Vue.withModifiers(a.registerUser,["prevent"])},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.$t("register")),1)])),_:1},8,["loading","onClick"])])),_:1},8,["model"])])}],["__scopeId","data-v-598264a8"]]);export{V as default};
