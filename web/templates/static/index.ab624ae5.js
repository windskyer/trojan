var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,u=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o;import{_ as r,s as d,b as s,v as l}from"./index.d1286f7e.js";import{u as V}from"./user.08d0e386.js";const i={data:()=>({timer:null,trojanVersion:"",trojanUptime:"",keyOffset:0,valueOffset:0,userList:[],downloadData:0,uploadData:0,totalData:0,cpu:{percentage:0,color:""},memory:{percentage:0,used:0,total:0,color:""},swap:{percentage:0,used:0,total:0,color:""},disk:{percentage:0,used:0,total:0,color:""},load:"",netSpeed:{up:"",down:""},netCount:""}),computed:((e,r)=>{for(var d in r||(r={}))a.call(r,d)&&u(e,d,r[d]);if(t)for(var d of t(r))o.call(r,d)&&u(e,d,r[d]);return e})({},Vuex.mapState(["isAdmin"])),created(){this.$store.commit("SET_NPROGRESS",!1),this.setOffset(),this.getVersion(),this.getUserList()},mounted(){this.isAdmin&&this.getServerInfo(),this.timer=setInterval((()=>{this.isAdmin&&this.getServerInfo(),this.getVersion(),this.getUserList()}),6e3),window.onresize=()=>(()=>{this.setOffset()})()},unmounted(){this.$store.commit("SET_NPROGRESS",!0),clearInterval(this.timer)},methods:{setOffset(){document.body.clientWidth<1e3?(this.keyOffset=1,this.valueOffset=2,this.iconShow=!1):(this.keyOffset=0,this.valueOffset=0,this.iconShow=!0)},navigate(e){this.$router.push({path:e})},getServerInfo(){d().then((e=>{const t=e.Data;this.cpu.percentage=parseFloat(t.cpu[0].toFixed(2)),this.cpu.color=this.computeColor(this.cpu.percentage),this.memory=this.computePercent(t.memory),this.swap=this.computePercent(t.swap),this.disk=this.computePercent(t.disk),this.netSpeed.up=s(t.speed.Up)+"/s",this.netSpeed.down=s(t.speed.Down)+"/s",this.netCount=t.netCount.tcp+" / "+t.netCount.udp,this.load=t.load.load1+", "+t.load.load5+", "+t.load.load15}))},computePercent(e){const t=parseFloat(e.usedPercent.toFixed(2));return{percentage:t,used:s(e.used),total:s(e.total),color:this.computeColor(t)}},computeColor:e=>e<80?"#67C23A":e<90?"#E6A23C":"#F56C6C",async getUserList(){const e=await V();if("success"===e.Msg){const t=e.Data;this.userList=t.userList;let a=0,o=0;for(let e=0;e<this.userList.length;e++)a+=this.userList[e].Download,o+=this.userList[e].Upload;this.downloadData=s(a),this.uploadData=s(o),this.totalData=s(a+o)}else this.$message.error(e.Msg)},async getVersion(){const e=(await l()).Data;this.trojanVersion=e.trojanVersion,this.trojanUptime=e.trojanUptime}}},n=(e=>(Vue.pushScopeId("data-v-0b29f6d2"),e=e(),Vue.popScopeId(),e))((()=>Vue.createElementVNode("div",null,"CPU",-1))),c={class:"el-icon-top",style:{"margin-right":"8px"}},p={class:"el-icon-bottom"};var h=r(i,[["render",function(e,t,a,o,u,r){const d=Vue.resolveComponent("el-progress"),s=Vue.resolveComponent("el-col"),l=Vue.resolveComponent("el-row"),V=Vue.resolveComponent("el-card"),i=Vue.resolveComponent("el-link"),h=Vue.resolveComponent("el-tooltip"),m=Vue.resolveComponent("el-tag");return Vue.openBlock(),Vue.createElementBlock("div",null,[e.isAdmin?(Vue.openBlock(),Vue.createBlock(l,{key:0},{default:Vue.withCtx((()=>[Vue.createVNode(s,{span:24},{default:Vue.withCtx((()=>[Vue.createVNode(V,{shadow:"hover"},{default:Vue.withCtx((()=>[Vue.createVNode(l,null,{default:Vue.withCtx((()=>[Vue.createVNode(s,{sm:24,md:12},{default:Vue.withCtx((()=>[Vue.createVNode(l,null,{default:Vue.withCtx((()=>[Vue.createVNode(s,{span:12,style:{"text-align":"center"}},{default:Vue.withCtx((()=>[Vue.createVNode(d,{type:"dashboard",percentage:u.cpu.percentage,color:u.cpu.color},null,8,["percentage","color"]),n])),_:1}),Vue.createVNode(s,{span:12,style:{"text-align":"center"}},{default:Vue.withCtx((()=>[Vue.createVNode(d,{type:"dashboard",percentage:u.memory.percentage,color:u.memory.color},null,8,["percentage","color"]),Vue.createElementVNode("div",null,Vue.toDisplayString(e.$t("dashboard.memory"))+": "+Vue.toDisplayString(u.memory.used)+"/"+Vue.toDisplayString(u.memory.total),1)])),_:1})])),_:1})])),_:1}),Vue.createVNode(s,{sm:24,md:12},{default:Vue.withCtx((()=>[Vue.createVNode(l,null,{default:Vue.withCtx((()=>[Vue.createVNode(s,{span:12,style:{"text-align":"center"}},{default:Vue.withCtx((()=>[Vue.createVNode(d,{type:"dashboard",percentage:u.swap.percentage,color:u.swap.color},null,8,["percentage","color"]),Vue.createElementVNode("div",null,"swap: "+Vue.toDisplayString(u.swap.used)+"/"+Vue.toDisplayString(u.swap.total),1)])),_:1}),Vue.createVNode(s,{span:12,style:{"text-align":"center"}},{default:Vue.withCtx((()=>[Vue.createVNode(d,{type:"dashboard",percentage:u.disk.percentage,color:u.disk.color},null,8,["percentage","color"]),Vue.createElementVNode("div",null,Vue.toDisplayString(e.$t("dashboard.disk"))+": "+Vue.toDisplayString(u.disk.used)+"/"+Vue.toDisplayString(u.disk.total),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):Vue.createCommentVNode("",!0),Vue.createVNode(l,null,{default:Vue.withCtx((()=>[Vue.createVNode(s,{sm:24,md:12},{default:Vue.withCtx((()=>[Vue.createVNode(V,{class:"home-card",shadow:"hover"},{default:Vue.withCtx((()=>[Vue.createVNode(l,null,{default:Vue.withCtx((()=>[Vue.createVNode(s,{span:10},{default:Vue.withCtx((()=>[Vue.createElementVNode("b",null,Vue.toDisplayString(e.$t("dashboard.trojanVersion"))+": ",1)])),_:1}),Vue.createVNode(s,{span:12,style:{"padding-top":"1px"}},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(u.trojanVersion),1)])),_:1})])),_:1})])),_:1})])),_:1}),Vue.createVNode(s,{sm:24,md:12},{default:Vue.withCtx((()=>[Vue.createVNode(V,{class:"home-card",shadow:"hover"},{default:Vue.withCtx((()=>[Vue.createVNode(l,null,{default:Vue.withCtx((()=>[Vue.createVNode(s,{span:10},{default:Vue.withCtx((()=>[Vue.createElementVNode("b",null,Vue.toDisplayString(e.$t("dashboard.trojanUser"))+":",1)])),_:1}),Vue.createVNode(s,{span:12,style:{"padding-top":"1px"}},{default:Vue.withCtx((()=>[Vue.createVNode(i,{type:"primary",onClick:t[0]||(t[0]=e=>r.navigate("/user"))},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(u.userList.length),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),Vue.createVNode(l,null,{default:Vue.withCtx((()=>[Vue.createVNode(s,{sm:24,md:12},{default:Vue.withCtx((()=>[Vue.createVNode(V,{class:"home-card",shadow:"hover"},{default:Vue.withCtx((()=>[Vue.createVNode(l,null,{default:Vue.withCtx((()=>[Vue.createVNode(s,{span:10},{default:Vue.withCtx((()=>[Vue.createElementVNode("b",null,Vue.toDisplayString(e.$t("dashboard.trojanUptime"))+":",1)])),_:1}),Vue.createVNode(s,{span:12,style:{"padding-top":"1px"}},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(u.trojanUptime),1)])),_:1})])),_:1})])),_:1})])),_:1}),e.isAdmin?(Vue.openBlock(),Vue.createBlock(s,{key:0,sm:24,md:12},{default:Vue.withCtx((()=>[Vue.createVNode(V,{class:"home-card",shadow:"hover"},{default:Vue.withCtx((()=>[Vue.createVNode(l,null,{default:Vue.withCtx((()=>[Vue.createVNode(s,{span:10},{default:Vue.withCtx((()=>[Vue.createElementVNode("b",null,Vue.toDisplayString(e.$t("dashboard.load"))+":",1)])),_:1}),Vue.createVNode(h,{class:"item",effect:"dark",content:"load1, load5, load15",placement:"top-start"},{default:Vue.withCtx((()=>[Vue.createVNode(s,{span:12,style:{"padding-top":"1px"}},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(u.load),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):Vue.createCommentVNode("",!0)])),_:1}),Vue.createVNode(l,null,{default:Vue.withCtx((()=>[e.isAdmin?(Vue.openBlock(),Vue.createBlock(s,{key:0,sm:24,md:12},{default:Vue.withCtx((()=>[Vue.createVNode(V,{class:"home-card",shadow:"hover"},{default:Vue.withCtx((()=>[Vue.createVNode(l,null,{default:Vue.withCtx((()=>[Vue.createVNode(s,{span:10},{default:Vue.withCtx((()=>[Vue.createElementVNode("b",null,Vue.toDisplayString(e.$t("dashboard.netSpeed"))+":",1)])),_:1}),Vue.createVNode(s,{span:12,style:{"padding-top":"1px"}},{default:Vue.withCtx((()=>[Vue.createElementVNode("i",c,Vue.toDisplayString(u.netSpeed.up),1),Vue.createElementVNode("i",p,Vue.toDisplayString(u.netSpeed.down),1)])),_:1})])),_:1})])),_:1})])),_:1})):Vue.createCommentVNode("",!0),e.isAdmin?(Vue.openBlock(),Vue.createBlock(s,{key:1,sm:24,md:12},{default:Vue.withCtx((()=>[Vue.createVNode(V,{class:"home-card",shadow:"hover"},{default:Vue.withCtx((()=>[Vue.createVNode(l,null,{default:Vue.withCtx((()=>[Vue.createVNode(s,{span:10},{default:Vue.withCtx((()=>[Vue.createElementVNode("b",null,Vue.toDisplayString(e.$t("dashboard.netCount"))+":",1)])),_:1}),Vue.createVNode(h,{class:"item",effect:"dark",content:"tcp / udp",placement:"top-start"},{default:Vue.withCtx((()=>[Vue.createVNode(s,{span:12,style:{"padding-top":"1px"}},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(u.netCount),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):Vue.createCommentVNode("",!0)])),_:1}),Vue.createVNode(l,{style:{"margin-top":"10px"}},{default:Vue.withCtx((()=>[Vue.createVNode(s,{span:7},{default:Vue.withCtx((()=>[Vue.createVNode(V,{shadow:"hover"},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.$t("dashboard.upload"))+": ",1),Vue.createVNode(m,{effect:"dark",type:"success"},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(u.uploadData),1)])),_:1})])),_:1})])),_:1}),Vue.createVNode(s,{span:7,offset:1},{default:Vue.withCtx((()=>[Vue.createVNode(V,{shadow:"hover"},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.$t("dashboard.download"))+": ",1),Vue.createVNode(m,{effect:"dark",type:"success"},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(u.downloadData),1)])),_:1})])),_:1})])),_:1}),Vue.createVNode(s,{span:7,offset:1},{default:Vue.withCtx((()=>[Vue.createVNode(V,{shadow:"hover"},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.$t("dashboard.total"))+": ",1),Vue.createVNode(m,{effect:"dark",type:"success"},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(u.totalData),1)])),_:1})])),_:1})])),_:1})])),_:1})])}],["__scopeId","data-v-0b29f6d2"]]);export{h as default};
